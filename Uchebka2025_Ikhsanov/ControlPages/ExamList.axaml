<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Uchebka2025_Ikhsanov.ControlPages.ExamList">
    <Grid Background="#F8FAFC">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>


        <Border Grid.Column="0" Background="#2D3748" Padding="0 30">
            <StackPanel Spacing="8">
                <TextBlock Text="Меню" FontSize="22" FontWeight="Bold" Foreground="White"
                           HorizontalAlignment="Center" Margin="0 0 0 20" />

                <Button Name="MainBtn" Content="Главная страница" Height="42" CornerRadius="12" Background="#4A5568"
                        Foreground="White" FontSize="15" Click="MainPageEmployees" />
                <Button Name="DiscBtn" Content="Дисциплины" Height="42" CornerRadius="12" Background="#4A5568"
                        Foreground="White" FontSize="15" Click="DisciplineList" />
                <Button Name="ExamBtn" Content="Экзамены" Height="42" CornerRadius="12" Background="#4A5568"
                        Foreground="White" FontSize="15" Click="ExamsList" />
                <Button Name="TeachBtn" Content="Преподаватели" Height="42" CornerRadius="12" Background="#4A5568"
                        Foreground="White" FontSize="15" Click="TeachList" />
                <Button Name="StudBtn" Content="Студенты" Height="42" CornerRadius="12" Background="#4A5568"
                        Foreground="White" FontSize="15" Click="StudList" />
                <Button Name="HeadBtn" Content="Зав. кафедры" Height="42" CornerRadius="12" Background="#4A5568"
                        Foreground="White" FontSize="15" Click="DepartHeadLists" />

                <Border Background="#4A5568" Height="1" Margin="16 16" />

                <Button Content="Выход" Height="42" CornerRadius="12" Background="#E53E3E" Foreground="White"
                        FontSize="15" FontWeight="SemiBold" Click="Leave" />
            </StackPanel>
        </Border>

        <Border Grid.Column="1"
                Margin="30"
                Background="White"
                CornerRadius="16"
                BoxShadow="0 4 20 0 #20000000"
                BorderBrush="#E2E8F0"
                BorderThickness="1">

            <StackPanel Spacing="20" Margin="24">

                <Border Background="#1976D2"
                        CornerRadius="12"
                        Padding="16 12">
                    <TextBlock Text="Экзамены"
                               Foreground="White"
                               FontSize="18"
                               FontWeight="SemiBold" />
                </Border>
                
                <StackPanel Orientation="Horizontal" Spacing="12">
                <!-- Поиск по ФИО / дисциплине -->
                <TextBox Name="SearchBox"
                         Watermark="Поиск по студенту, преподавателю или дисциплине..."
                         Width="350"
                         Height="36"
                         Padding="10 0"
                         FontSize="14"
                         TextChanged="SearchBox_TextChanged"/>

                <!-- Фильтр по дисциплине -->
                <TextBlock Text="Дисциплина:" VerticalAlignment="Center" FontSize="14"/>
                <ComboBox Name="DisciplineFilter"
                          Width="220"
                          Height="36"
                          FontSize="14"
                          SelectionChanged="DisciplineFilter_SelectionChanged">
                    <ComboBoxItem Content="Все дисциплины" Tag=""/>
                </ComboBox>
            </StackPanel>

                <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="600">
                    <DataGrid Name="ExamsDataGrid"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              Background="Transparent"
                              BorderThickness="0"
                              RowHeight="48"
                              FontSize="14"
                              HeadersVisibility="Column"
                              DoubleTapped="InputElement_OnDoubleTapped">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Студент"
                                                Binding="{Binding StudentRegNavigation.Fullname}"
                                                Width="180" />

                            <DataGridTextColumn Header="Дисциплина"
                                                Binding="{Binding DisciplineCodeNavigation.NameDisc}"
                                                Width="2*" />

                            <DataGridTextColumn Header="Дата"
                                                Binding="{Binding ExamDate, StringFormat=dd.MM.yyyy}"
                                                Width="110" />

                            <DataGridTextColumn Header="Аудитория"
                                                Binding="{Binding Classroom}"
                                                Width="100" />

                            <DataGridTextColumn Header="Оценка"
                                                Binding="{Binding Grade}"
                                                Width="90" />

                            <DataGridTextColumn Header="Преподаватель"
                                                Binding="{Binding ExaminerTabNavigation.Fullname}"
                                                Width="180" />

                            <DataGridTemplateColumn Header="Действие" Width="110">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Удалить"
                                                Background="#E53E3E"
                                                Foreground="White"
                                                Height="34"
                                                CornerRadius="8"
                                                FontSize="13"
                                                Padding="12 0"
                                                HorizontalAlignment="Center"
                                                Click="DeleteExam_Click" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </ScrollViewer>

                <Button Content="Добавить экзамен"
                        Name="AddExamBtn"
                        Click="AddExam_Click"
                        Height="52"
                        CornerRadius="14"
                        Background="#3182CE"
                        Foreground="White"
                        FontSize="16"
                        FontWeight="SemiBold"
                        HorizontalAlignment="Stretch"
                        Margin="0 10 0 0" />

            </StackPanel>
        </Border>
    </Grid>
</UserControl>